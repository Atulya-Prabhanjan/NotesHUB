{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\Ranjith VK\\\\Desktop\\\\vit\\\\Fall semester 2021\\\\Software engineering\\\\project codes\\\\Notes-Review-home-main (2)\\\\src\\\\Components\\\\Search.js\";\nimport React from 'react';\nimport axios from 'axios';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nexport default class Search extends React.Component {\n  constructor(props) {\n    super(props);\n\n    this.onInputchange = event => {\n      this.setState({\n        queryString: event.target.value\n      });\n    };\n\n    this.rateInput = () => {\n      this.setState({\n        rating: event.target.value\n      });\n    };\n\n    this.commentInput = () => {\n      this.setState({\n        comments: event.target.value\n      });\n    };\n\n    this.getRate = evt => {\n      console.log(\"Get Rate called for note id \", evt.target.value);\n      return /*#__PURE__*/_jsxDEV(\"div\", {\n        children: [/*#__PURE__*/_jsxDEV(\"input\", {\n          type: \"text\",\n          className: \"log-in-input sign-in-input\",\n          placeholder: \"Rating\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 38,\n          columnNumber: 9\n        }, this), \",\", /*#__PURE__*/_jsxDEV(\"input\", {\n          type: \"text\",\n          className: \"log-in-input sign-in-email\",\n          placeholder: \"Comments\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 39,\n          columnNumber: 9\n        }, this), \",\", /*#__PURE__*/_jsxDEV(\"button\", {\n          className: \"view-button\",\n          children: \"submit Ratings\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 40,\n          columnNumber: 9\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 37,\n        columnNumber: 16\n      }, this);\n    };\n\n    this.rateNotes = noteID => {\n      console.log(\" Note ID: \" + noteID);\n      const token = getToken();\n      axios.post('http://localhost:5000/rate', {\n        \"sessionToken\": token,\n        \"noteid\": noteID,\n        \"rating\": this.state.rating,\n        \"comments\": this.state.comments\n      }).then(response => {\n        alert(\"Opinions uploaded successfully!\");\n      }).catch(error => {\n        alert(\"Error\");\n      });\n    };\n\n    this.getComments = evt => {\n      var URLString = 'http://localhost:5000/rate?noteid=' + evt.target.value;\n      axios.get(URLString).then(response => {\n        console.log(response.data);\n        var Comments = response.data;\n\n        for (let Comment of Comments) {\n          console.log(Comment);\n        }\n\n        this.setState({\n          com: Comments\n        });\n      }).catch(error => {\n        console.log(error);\n        alert(\"No Data found!\");\n      });\n    };\n\n    this.getNotesData = () => {\n      var URLString = 'http://localhost:5000/notes?search=' + this.state.queryString;\n      axios.get(URLString).then(response => {\n        console.log(response.data);\n        var notes = response.data;\n\n        for (let note of notes) {\n          console.log(note);\n\n          if (note.rating >= 7.5) {\n            note.className = 'green';\n          } else if (note.rating < 5) {\n            note.className = 'red';\n          } else {\n            note.className = 'yellow';\n          }\n        }\n\n        this.setState({\n          results: notes\n        });\n      }).catch(error => {\n        console.log(error);\n        alert(\"No Data found!\");\n      });\n    };\n\n    this.renderComments = () => {\n      const Com = this.state.com;\n      let listOfComments = '';\n\n      if (Com && Com.length > 0) {\n        listOfComments = Com.map((comment, idx) => /*#__PURE__*/_jsxDEV(\"div\", {\n          children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n            children: \"Comments:-\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 101,\n            columnNumber: 22\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"comments-box\",\n            children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n              className: \"description\",\n              children: [comment.username, \":- \"]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 103,\n              columnNumber: 21\n            }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n              className: \"author\",\n              children: [comment.comments, \" \"]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 104,\n              columnNumber: 21\n            }, this)]\n          }, idx, true, {\n            fileName: _jsxFileName,\n            lineNumber: 102,\n            columnNumber: 17\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 101,\n          columnNumber: 17\n        }, this));\n      }\n\n      console.log('list of comments', listOfComments);\n      return /*#__PURE__*/_jsxDEV(\"div\", {\n        children: [\" \", listOfComments, \" \"]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 109,\n        columnNumber: 18\n      }, this);\n    };\n\n    this.renderResults = () => {\n      const notes = this.state.results;\n      let listOfNotes = '';\n\n      if (notes && notes.length > 0) {\n        listOfNotes = notes.map((note, idx) => {\n          return /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"search-upload-box\",\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"description\",\n              children: [\" Description: \", note.description, \" \"]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 118,\n              columnNumber: 21\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"author\",\n              children: [\" Author: \", note.author, \" \"]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 119,\n              columnNumber: 21\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"subject\",\n              children: [\" Subject: \", note.subject, \" \"]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 120,\n              columnNumber: 21\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: note.className,\n              children: [\" Average Rating: \", note.rating, \" \"]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 121,\n              columnNumber: 21\n            }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n              className: \"view-button\",\n              children: \"view\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 122,\n              columnNumber: 21\n            }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n              value: note.noteid,\n              className: \"rate-button\",\n              onClick: this.getRate,\n              children: \"rate\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 123,\n              columnNumber: 21\n            }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n              value: note.noteid,\n              className: \"comment-button\",\n              onClick: this.getComments,\n              children: \"comments\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 124,\n              columnNumber: 21\n            }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n              className: \"delete-button\",\n              children: \"delete\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 125,\n              columnNumber: 21\n            }, this), this.renderComments, /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"extra-space\",\n              children: \" \"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 127,\n              columnNumber: 21\n            }, this)]\n          }, note.noteid, true, {\n            fileName: _jsxFileName,\n            lineNumber: 117,\n            columnNumber: 25\n          }, this);\n        });\n      }\n\n      return /*#__PURE__*/_jsxDEV(\"div\", {\n        children: listOfNotes\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 131,\n        columnNumber: 16\n      }, this);\n    };\n\n    this.state = {\n      results: [],\n      listOfNotes: '',\n      queryString: '',\n      rating: 0,\n      comments: '',\n      com: []\n    };\n  }\n\n  render() {\n    return /*#__PURE__*/_jsxDEV(_Fragment, {\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"search-back\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"search-head\",\n          children: \" NotesHub Search / View Page \"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 138,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n          type: \"search\",\n          onChange: this.onInputchange,\n          className: \"search-bar\",\n          placeholder: \"Search for notes..\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 139,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          className: \"search-button\",\n          onClick: this.getNotesData,\n          children: \" Submit \"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 143,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"searchResult\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 145,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"search-choose\",\n          children: \" Choose a document: - \"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 146,\n          columnNumber: 21\n        }, this), \" \", this.renderResults()]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 137,\n        columnNumber: 17\n      }, this)\n    }, void 0, false);\n  }\n\n}\n\nfunction getToken() {\n  const tokenString = sessionStorage.getItem('token');\n  console.log(\"Token String\" + tokenString);\n  const userToken = JSON.parse(tokenString);\n  console.log(\"userToken\" + userToken);\n  return userToken;\n}","map":{"version":3,"sources":["C:/Users/Ranjith VK/Desktop/vit/Fall semester 2021/Software engineering/project codes/Notes-Review-home-main (2)/src/Components/Search.js"],"names":["React","axios","Search","Component","constructor","props","onInputchange","event","setState","queryString","target","value","rateInput","rating","commentInput","comments","getRate","evt","console","log","rateNotes","noteID","token","getToken","post","state","then","response","alert","catch","error","getComments","URLString","get","data","Comments","Comment","com","getNotesData","notes","note","className","results","renderComments","Com","listOfComments","length","map","comment","idx","username","renderResults","listOfNotes","description","author","subject","noteid","render","tokenString","sessionStorage","getItem","userToken","JSON","parse"],"mappings":"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","sourcesContent":["import React from 'react'\r\nimport axios from 'axios';\r\n\r\nexport default class Search extends React.Component {\r\n    constructor(props) {\r\n    super(props);\r\n    this.state = {\r\n        results: [],\r\n        listOfNotes: '',\r\n        queryString: '',\r\n        rating:0,\r\n        comments:'',\r\n        com:[]\r\n        }\r\n    }\r\n\r\n    onInputchange = (event) => {\r\n        this.setState({\r\n            queryString: event.target.value\r\n        });\r\n    }\r\n\r\n    rateInput = () => {\r\n        this.setState({\r\n            rating: event.target.value\r\n        });\r\n    }\r\n\r\n    commentInput = () => {\r\n        this.setState({\r\n            comments: event.target.value\r\n        });\r\n    }\r\n\r\n    getRate = (evt) =>{\r\n        console.log(\"Get Rate called for note id \", evt.target.value);\r\n        return(<div>\r\n        <input type = \"text\"  className = \"log-in-input sign-in-input\" placeholder = \"Rating\"/>,\r\n        <input type = \"text\"  className = \"log-in-input sign-in-email\" placeholder = \"Comments\"/>,\r\n        <button className = \"view-button\">submit Ratings</button></div>\r\n        );\r\n    }\r\n\r\n    rateNotes = (noteID) => {\r\n        console.log(\" Note ID: \" + noteID);\r\n        const token = getToken();\r\n        axios.post('http://localhost:5000/rate',{\r\n            \"sessionToken\": token,\r\n            \"noteid\": noteID,\r\n            \"rating\": this.state.rating,\r\n            \"comments\": this.state.comments\r\n        }).then(response => {\r\n            alert(\"Opinions uploaded successfully!\");\r\n        }).catch(error => {\r\n            alert(\"Error\");\r\n        })\r\n    };\r\n\r\n    getComments = (evt) => {\r\n        var URLString = 'http://localhost:5000/rate?noteid=' + evt.target.value;\r\n        axios.get(URLString).then(response => {\r\n            console.log(response.data);\r\n            var Comments = response.data;\r\n            for (let Comment of Comments) {\r\n                console.log(Comment);\r\n            }\r\n            this.setState({ com: Comments })\r\n        }).catch(error => {\r\n            console.log(error);\r\n            alert(\"No Data found!\");\r\n        })\r\n    };\r\n\r\n    getNotesData = () => {\r\n        var URLString = 'http://localhost:5000/notes?search=' + this.state.queryString;\r\n        axios.get(URLString).then(response => {\r\n            console.log(response.data);\r\n            var notes = response.data;\r\n            for (let note of notes) {\r\n                console.log(note);\r\n                if (note.rating >= 7.5) {\r\n                    note.className = 'green';\r\n                } else if (note.rating < 5) {\r\n                    note.className = 'red';\r\n                } else {\r\n                    note.className = 'yellow';\r\n                }\r\n            }\r\n            this.setState({ results: notes })\r\n        }).catch(error => {\r\n            console.log(error);\r\n            alert(\"No Data found!\");\r\n        })\r\n    };\r\n\r\n    renderComments = () => {\r\n        const Com = this.state.com;\r\n        let listOfComments = '';\r\n        if (Com && Com.length > 0) {\r\n            listOfComments = Com.map((comment, idx) =>\r\n                <div><h2>Comments:-</h2>\r\n                <div className = \"comments-box\" key = { idx } >\r\n                    <h3 className = \"description\" >{ comment.username }:- </h3> \r\n                    <p className = \"author\" >{ comment.comments } </p> \r\n                </div>\r\n                </div> );\r\n        }\r\n        console.log('list of comments', listOfComments);\r\n        return ( <div> { listOfComments } </div>);\r\n    }\r\n\r\n    renderResults = () => {\r\n        const notes = this.state.results;\r\n        let listOfNotes = '';\r\n        if (notes && notes.length > 0) {\r\n            listOfNotes = notes.map((note, idx) =>{\r\n                return( <div className = \"search-upload-box\" key = { note.noteid } >\r\n                    <div className = \"description\" > Description: { note.description } </div> \r\n                    <div className = \"author\" > Author: { note.author } </div> \r\n                    <div className = \"subject\" > Subject: { note.subject } </div> \r\n                    <div className = { note.className } > Average Rating: { note.rating } </div>\r\n                    <button className = \"view-button\" >view</button>  \r\n                    <button value={note.noteid} className = \"rate-button\" onClick = {this.getRate}>rate</button>   \r\n                    <button value={note.noteid} className = \"comment-button\" onClick = {this.getComments}>comments</button> \r\n                    <button className = \"delete-button\" >delete</button> \r\n                    {this.renderComments}\r\n                    <div className = \"extra-space\" > </div> \r\n                </div> );\r\n            })\r\n        }\r\n        return(<div>{listOfNotes}</div>);\r\n    }\r\n\r\n    render() {\r\n        return ( \r\n            <>\r\n                <div className = \"search-back\" >\r\n                    <div className = \"search-head\" > NotesHub Search / View Page </div>   \r\n                    <input type = \"search\"\r\n                        onChange = { this.onInputchange }\r\n                        className = \"search-bar\"\r\n                        placeholder = \"Search for notes..\" />\r\n                    <button className = \"search-button\"\r\n                        onClick = { this.getNotesData } > Submit </button>\r\n                    <div className = \"searchResult\" ></div> \r\n                    <div className = \"search-choose\" > Choose a document: - </div> { this.renderResults() } \r\n                </div> \r\n            </>\r\n        )\r\n    }\r\n}\r\n\r\nfunction getToken(){\r\n  const tokenString = sessionStorage.getItem('token');\r\n  console.log (\"Token String\" + tokenString);\r\n  const userToken=JSON.parse(tokenString);  \r\n  console.log (\"userToken\" + userToken);\r\n  return userToken;\r\n}"]},"metadata":{},"sourceType":"module"}